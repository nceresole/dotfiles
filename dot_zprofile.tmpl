# .zprofile
#
# Run once at login before .zshrc
# Managed by chezmoi

# -----------------------------------------------------------------------------
# Homebrew
# -----------------------------------------------------------------------------
{{- if .is_macos }}
if [[ -f "/opt/homebrew/bin/brew" ]]; then
    eval "$(/opt/homebrew/bin/brew shellenv)"
elif [[ -f "/usr/local/bin/brew" ]]; then
    eval "$(/usr/local/bin/brew shellenv)"
fi
{{- else if .is_linux }}
if [[ -f "/home/linuxbrew/.linuxbrew/bin/brew" ]]; then
    eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"
fi
{{- end }}

# -----------------------------------------------------------------------------
# Pyenv
# -----------------------------------------------------------------------------
if command -v pyenv &> /dev/null; then
    export PYENV_ROOT="$HOME/.pyenv"
    export PATH="$PYENV_ROOT/bin:$PATH"
    eval "$(pyenv init --path)"
fi

# -----------------------------------------------------------------------------
# NVM (legacy - prefer fnm)
# -----------------------------------------------------------------------------
export NVM_DIR="$HOME/.nvm"
if [ -d "$NVM_DIR" ]; then
    [ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
fi

# -----------------------------------------------------------------------------
# Cargo (Rust)
# -----------------------------------------------------------------------------
if [ -f "$HOME/.cargo/env" ]; then
    . "$HOME/.cargo/env"
fi

# -----------------------------------------------------------------------------
# Local profile configurations
# -----------------------------------------------------------------------------
if [ -f ~/.zprofile.local ]; then
    source ~/.zprofile.local
fi
